<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<style type="text/css">

</style>

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">

<!-- jQuery library -->
<!-- <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.slim.min.js"></script> -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

<!-- Popper JS -->
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>

<script type="text/javascript">
	//비동기 방식으로 서버에 요청하되 XMLHttpRequest 를 직접 명시하는 방법은 코드량이 많으므로 
	//줄여쓴 간편형식의 제이쿼리를 이용해본다
	function registAsync(){
		$.ajax({
			url:"/board/regist",
			type:"post",
			data:{  //전송할 파라미터와 그 값들을 json 으로 구성
				title:$("#title").val(), 
				writer:$("#writer").val(), 
				content:$("#content").val()
			},
			success:function(result, status, xhttp){ //서버가 200 으로 응답하면 이 익명 함수가 동작함 
											// if(this.readyState==4 && this.status==200)
				console.log("등록 성공", result);
				getBoardList();
			}, 
			error:function(status, xhttp, err){ //500
				console.log("등록 실패. 서버가 에러를 발생하여 알려줌");
			}
		});
	}
	
	//비동기 방식으로, 게시판 목록을 요청하자 
	function getBoardList(){
		$.ajax({
			url:"/board/list",
			type:"get", 
			success: function(result, status, xhttp){
				console.log("서버가 보내온 목록 데이터는 ", result);
			}			
		});		
	}
	
	$(function(){
		getBoardList();//게시물 목록 가져오기
		
		$("button").click(function(){
			registAsync();
		});			
	});
</script>
</head>
<body>
	<div class="container">

		<div class="row">
			<div class="col-sm-3" style="background-color:yellow;">
				
				<div class="form-group">
					<input type="text" class="form-control" id="title" placeholder="제목입력..">
				</div>
				<div class="form-group">
					<input type="text" class="form-control" id="writer" placeholder="작성자..">
				</div>
				<div class="form-group">
					<textarea type="text" class="form-control" id="content" placeholder="제목입력.."></textarea>
				</div>
				
				<div class="form-group">
					<button type="button" class="form-control btn-primary">글등록</button>
				</div>
							
			</div>
			
			
			<div class="col-sm-6" style="background-color:orange;">6</div>
			<div class="col-sm-3" style="background-color:pink;">3</div>
		</div>
		
	</div>
	
</body>
</html>



